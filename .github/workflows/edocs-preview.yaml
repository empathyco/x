name: Create EPDocs preview
on:
  pull_request:
    paths:
      - packages/x-components/static-docs/**
env:
  GH_TOKEN: ${{ secrets.SUPPORT_TOKEN }}
jobs:
  test:
    runs-on: [self-hosted, platform]
    steps:
      - name: Building project
        run: |
          echo "${{ secrets.GH_TOKEN }}"
          echo "${{ secrets.JIRA_USER_EMAIL }}"
          echo "${{ secrets.JIRA_API_TOKEN }}"
  preview-edocs:
    uses: empathyco/platform-reusable-github-actions/.github/workflows/edocs-preview.yml@main
    with:
      teamRepo: 'x'
      branch: ${{ github.head_ref }}
      prNum: ${{ github.event.pull_request.number }}
      prMessage: '⚠️ Only for Empathy members ⚠️ We’re sorry for the inconvenience!\n'
      publicRepo: true
    secrets:
      GH_TOKEN: ${{ secrets.SUPPORT_TOKEN }}
      JIRA_USER_EMAIL: ${{ secrets.JIRA_USER_EMAIL }}
      JIRA_API_TOKEN: ${{ secrets.JIRA_API_TOKEN }}
