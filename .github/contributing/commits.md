# Commits

Commits must follow the
[Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/#summary) syntax.
The `CHANGELOG.md` file is generated by an automated process using standard version that requires the commits
to be in a specific format, so they can be parsed.

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]

```

### Type

For the type part of the commit, we use the ones defined by the
[Angular convention](https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#type)

- **build**: Changes that affect the build system or external dependencies.
- **ci**: Changes to our CI configuration files and scripts.
- **chore**: Changes that you don’t want to appear in the change-log. For example this can be used
  to fix the change-log if any release goes wrong.
- **docs**: Documentation only changes.
- **feat**: A new feature. New components, services, utilities…
- **fix**: A bug fix, or a hot fix
- **perf**: A code change that improves performance.
- **refactor**: An internal code change that neither fixes a bug nor adds a feature while keeping
  the same public API of the affected parts.
- **style**: Changes that do not affect the meaning of the code (white-space, formatting, missing
  semi-colons, etc).
- **test**: Adding missing tests or correcting existing tests. Every new feature must have its own
  test, so if you are adding a new component with its tests, the type should be **feat**, not
  **test**

### Optional scope

The scope part may or may not be added. If a change affects the whole project i.e. changing Prettier
rules, it makes no sense to add a scope that says “all the project”. This part must only be added if
the change is localised in a specific part of the code.

Think of the scope as a way of grouping the related changes in the change-log, so a reader can
easily see all the changes that have been done to an specific part of the library.

If you don’t know what scope your commit should have, probably you should do multiple commits.

As a starting point we define the following scopes:

- **components**: changes that affect components that do not depend on any X Module.
- X Modules: If the change only affects one X Module, the name of the module in `kebab-case` must be
  used:
  - **empathize**
  - **facets**
  - **history-queries**
  - **identifier-results**
  - **next-queries**
  - **popular-searches**
  - **query-suggestions**
  - **recommendations**
  - **related-tags**
  - **search**
  - **search-box**
- **x-plugin**: For changes that affect the core of the x-components project. Modifying the Vue X
  Components plugin, the X Components mixin, the X bus are some of the examples that should have
  this scope.
- **wiring**: Changes that only affect the wires operators or wires factory.
- **e2e**: For end-to-end tests.
- **design-system**: For Design Tokens, CSS styling, etc.

### Description

The description is a short sentence written in **present tense** with an **imperative mood**. The
description must explain the intention of the change in a high level manner, you don’t have to give
details on how or why the change has been done, just tell what the change is about.

> added `Dropdown` component ❌ The message is in past tense

> add `Dropdown` component so it can be reused in the `SortDropdown` component that will be done in
> another PR ❌ Too specific

> adds `Dropdown` component ❌ Does not use imperative mood

> add `Dropdown` component ✅ Just perfect

### Optional body

If a simple description is not enough to describe the change, you can try to give more details in
the body of the commit. Remember that the purpose of using this commits format is to automate the
change-log generation.

This change-log is going to be read by users of the library, so keep the level of details low.
Readers want to know how upgrading a version will affect their projects, but they probably don’t
care about internal or private changes.

```
The `Dropdown` component serves as a replacement of the standard HTML `select` component. It exposes the same API to set the values and selected values, but besides of that it also allows to configure the animation to open and close the dropdown, and how each item is rendered.
```

### Optional footer

The footer can contain two parts: the breaking changes section, and the issue section.

#### Breaking changes

This footer must be prefixed with `BREAKING-CHANGE:` after that, you can write a brief description
of what the breaking change is, and what the users should do to their codebases in order to support
the change.

```
BREAKING-CHANGE: Rename `BaseEventsButton` to `EventsButton`.
```

```
BREAKING-CHANGE: Rename `BaseFilter` component to `Filter`, and move it from `components` to the `facets` module. Now it can be imported like this: `import { Filter } from '@empathyco/x-components/facets'`.
```

#### Issue

To properly link the commit with the issue id, add it at the end of the commit footer. The
change-log will then include a link to the task that is provided here so any reader can understand
more the why of the change.

```
EX-1234
```

### Examples of valid commits

Minimal commit

```
style: switch from tabs to spaces

EX-1234
```

Commit with scope

```
perf(search): improve performance of grid items position calculation

EX-4567
```

Commit with breaking changes

```
feat(facets): backend filters no longer keep their own `selected` status.

BREAKING-CHANGE: backend filters now trust the API selected value. The adapter must no map valid `filter.selected` values.

EX-1111
```
