<template>
  <!-- eslint-disable vue/attributes-order -->
  <transition-group
    v-bind="$attrs"
    v-on="$listeners"
    class="x-fade-and-slide"
    :name="name"
    :tag="tag"
    :appear="appear"
  >
    <!-- @slot (Required) Transition-group content -->
    <slot />
  </transition-group>
</template>

<script lang="ts">
  import { defineComponent } from 'vue';
  import { useDisableAnimation } from './use-disable-animation';

  /**
   * Renders a transition group wrapping the elements passed in the default slot and animating
   * them with a fade and slide animation.
   *
   * @public
   */
  export default defineComponent({
    name: 'FadeAndSlide',
    inheritAttrs: false,
    props: {
      /**
       * HTML Element that the transition-group children will be wrapped in.
       */
      tag: String,
      /**
       * Indicates if the transition must be applied on the initial render of the node.
       */
      appear: {
        type: Boolean,
        default: true
      }
    },
    setup: function () {
      /**
       * The name of the animation.
       */
      const animationName = 'x-fade-and-slide-';

      const { name } = useDisableAnimation(animationName);

      return { name };
    }
  });
</script>

<style lang="scss">
  $transition-opacity-duration: 0.2s;
  $transition-transform-duration: 0.3s;

  .x-fade-and-slide {
    &--move,
    &--enter-active,
    &--leave-active {
      transition: opacity $transition-opacity-duration ease-out,
        transform $transition-transform-duration ease-out;
    }

    &--enter,
    &--leave-to {
      transform: translate(-20%, 0);
      opacity: 0;
    }

    &--leave-active {
      position: absolute;
    }
  }
</style>

<docs lang="mdx">
## Examples

The FadeAndSlide component is intended to be used as a prop in animatable components but also works
as a wrapper of a transition group that can receive the tag it will render to as a prop.

Used as a prop in an animatable component:

```vue
<AnimatableComponent :animation="FadeAndSlide" />
```

Used as a regular component passing a the tag as prop:

```vue
<FadeAndSlide tag="ul">
  <li>Element to animate</li>
  <li>Element to animate</li>
  <li>Element to animate</li>
</FadeAndSlide>
```
</docs>
